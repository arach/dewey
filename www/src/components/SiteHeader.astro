---
interface Props {
  showSearch?: boolean
}

const { showSearch = true } = Astro.props
---

<header class="site-header" data-pagefind-ignore>
  <div class="site-header-inner">
    <div class="site-header-left">
      <a class="site-header-logo" href="/">dewey</a>
      <nav class="site-header-nav">
        <a class="site-header-link" href="/templates">Templates</a>
        <a class="site-header-link" href="/ideas">Ideas</a>
        <a class="site-header-link" href="/about">About</a>
      </nav>
    </div>
    <div class="site-header-right">
      {showSearch && (
        <button
          class="site-header-search"
          type="button"
          data-search-toggle
          data-pagefind-ignore
        >
          Search
          <span class="site-header-search-key">âŒ˜K</span>
        </button>
      )}
      <button
        class="site-header-theme"
        type="button"
        data-theme-toggle
        data-pagefind-ignore
        title="Toggle theme"
      >
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
      </button>
      <a
        class="site-header-gh"
        href="https://github.com/arach/dewey"
        target="_blank"
        rel="noopener noreferrer"
        title="GitHub"
      >
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/></svg>
      </a>
    </div>
  </div>
</header>

<style is:inline>
  .site-header {
    position: sticky;
    top: 0;
    z-index: 50;
    background: var(--color-bg);
    border-bottom: 1px solid var(--color-border);
  }

  .site-header-inner {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 60px;
    padding: 0 clamp(20px, 4vw, 48px);
  }

  .site-header-left {
    display: flex;
    align-items: baseline;
    gap: 40px;
  }

  .site-header-logo {
    font-family: 'Noto Serif Display', serif;
    font-size: 22px;
    font-weight: 300;
    color: var(--color-text);
    text-decoration: none;
    letter-spacing: -0.01em;
  }

  .site-header-nav {
    display: flex;
    align-items: baseline;
    gap: 24px;
  }

  .site-header-link {
    font-size: 13px;
    font-weight: 300;
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color 0.2s;
  }

  .site-header-link:hover {
    color: var(--color-text);
  }

  .site-header-right {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .site-header-search {
    display: none;
    align-items: center;
    gap: 8px;
    padding: 6px 12px;
    border: 1px solid var(--color-border);
    border-radius: 9999px;
    background: none;
    font-family: 'Geist Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.04em;
    color: var(--color-text-muted);
    cursor: pointer;
    transition: all 0.15s;
  }

  @media (min-width: 640px) {
    .site-header-search {
      display: flex;
    }
  }

  .site-header-search:hover {
    border-color: var(--color-text-muted);
    color: var(--color-text);
  }

  .site-header-search-key {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    opacity: 0.5;
  }

  .site-header-theme {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: 1px solid var(--color-border);
    border-radius: 50%;
    color: var(--color-text-muted);
    cursor: pointer;
    transition: all 0.2s;
  }

  .site-header-theme:hover {
    border-color: var(--color-text-muted);
    color: var(--color-text);
  }

  .site-header-gh {
    display: flex;
    align-items: center;
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color 0.2s;
  }

  .site-header-gh:hover {
    color: var(--color-text);
  }
</style>
