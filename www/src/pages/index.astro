---
import LandingLayout from '../layouts/LandingLayout.astro'
---

<LandingLayout title="Dewey - Agent-ready documentation">
  <Fragment slot="head">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Display:ital,wght@0,100;0,200;0,300;1,100;1,200;1,300&family=Inter:wght@300;400;500&family=JetBrains+Mono:wght@300;400&family=Geist+Mono:wght@300;400;500&display=swap" rel="stylesheet" />
    <style is:inline>
      :root {
        --s-bg: #f6f5f2;
        --s-bg-alt: #eeedea;
        --s-bg-inv: #eae7e1;
        --s-text: #2a2a28;
        --s-text-inv: #2a2a28;
        --s-text-muted: #8a8a85;
        --s-text-muted-inv: #7a7872;
        --s-border: #ddddd8;
        --s-border-inv: #d0cdc6;
        --s-highlight: #c4653a;
        --s-surface: #ffffff;
        --s-radius: 6px;
        --s-terminal-bg: #1a1a18;
        --s-terminal-border: rgba(0,0,0,0.06);
      }

      [data-theme='dark'] {
        --s-bg: #141413;
        --s-bg-alt: #1c1c1a;
        --s-bg-inv: #1e1e1c;
        --s-text: #e8e7e0;
        --s-text-inv: #e8e7e0;
        --s-text-muted: #a0a098;
        --s-text-muted-inv: #929289;
        --s-border: #333330;
        --s-border-inv: #3e3e3a;
        --s-highlight: #e09070;
        --s-surface: #1e1e1c;
        --s-radius: 6px;
        --s-terminal-bg: #0c0c0b;
        --s-terminal-border: rgba(255,255,255,0.1);
      }

      .v3 {
        font-family: 'Inter', -apple-system, sans-serif;
        font-weight: 400;
        background: var(--s-bg);
        color: var(--s-text);
        -webkit-font-smoothing: antialiased;
      }

      .v3 * { box-sizing: border-box; }

      /* ── Nav ── */
      .v3-nav {
        position: sticky;
        top: 0;
        z-index: 50;
        padding: 0 clamp(20px, 4vw, 48px);
        background: var(--s-bg);
        border-bottom: 1px solid var(--s-border);
      }

      .v3-nav-inner {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 60px;
      }

      .v3-nav-left {
        display: flex;
        align-items: baseline;
        gap: 44px;
      }

      .v3-logo {
        font-family: 'Noto Serif Display', serif;
        font-size: 26px;
        font-weight: 400;
        color: var(--s-text);
        text-decoration: none;
        letter-spacing: -0.01em;
      }

      .v3-nav-links {
        display: flex;
        align-items: center;
        gap: 28px;
      }

      .v3-nav-link {
        font-size: 13px;
        font-weight: 400;
        letter-spacing: 0.03em;
        color: var(--s-text-muted);
        text-decoration: none;
        transition: color 0.2s;
      }

      .v3-nav-link:hover { color: var(--s-text); }

      .v3-nav-right {
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .v3-nav-btn {
        font-family: 'JetBrains Mono', monospace;
        font-size: 11px;
        font-weight: 400;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        color: var(--s-bg);
        background: var(--s-text);
        border: none;
        border-radius: 100px;
        padding: 9px 20px;
        text-decoration: none;
        cursor: pointer;
        transition: opacity 0.2s;
      }

      .v3-nav-btn:hover { opacity: 0.8; }

      .v3-nav-gh {
        display: flex;
        align-items: center;
        gap: 7px;
        color: var(--s-text-muted);
        text-decoration: none;
        font-size: 13px;
        font-weight: 400;
        letter-spacing: 0.03em;
        transition: color 0.2s;
      }

      .v3-nav-gh:hover { color: var(--s-text); }

      .v3-nav-gh svg { flex-shrink: 0; }

      .v3-theme-btn {
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: none;
        border: 1px solid var(--s-border);
        border-radius: 50%;
        color: var(--s-text-muted);
        cursor: pointer;
        transition: all 0.2s;
      }

      .v3-theme-btn:hover {
        border-color: var(--s-text-muted);
        color: var(--s-text);
      }

      /* ── Hero ── */
      .v3-hero {
        background: var(--s-bg-inv);
        color: var(--s-text-inv);
        padding: clamp(36px, 5vw, 64px) clamp(20px, 4vw, 48px) clamp(36px, 5vw, 64px);
        position: relative;
        overflow: hidden;
      }

      .v3-hero::before {
        content: '';
        position: absolute;
        inset: 0;
        background: radial-gradient(ellipse 70% 50% at 10% 90%, rgba(196, 101, 58, 0.07) 0%, transparent 50%),
                    radial-gradient(ellipse 50% 40% at 90% 10%, rgba(140, 120, 100, 0.05) 0%, transparent 50%);
        pointer-events: none;
      }

      .v3-hero-inner {
        max-width: 1200px;
        margin: 0 auto;
        position: relative;
        z-index: 1;
      }

      .v3-hero-grid {
        display: grid;
        grid-template-columns: 1.2fr 1fr;
        gap: 48px;
        align-items: center;
      }

      @media (max-width: 900px) {
        .v3-hero-grid {
          grid-template-columns: 1fr;
          gap: 40px;
        }
      }

      .v3-hero h1 {
        font-family: 'Noto Serif Display', serif;
        font-size: clamp(52px, 7.5vw, 88px);
        font-weight: 200;
        line-height: 0.95;
        letter-spacing: -0.04em;
        margin: 0;
        color: var(--s-text-inv);
      }

      .v3-hero h1 em {
        font-style: italic;
        font-weight: 200;
        color: var(--s-text-muted-inv);
      }

      /* ── Rotating word ── */
      .v3-rotate {
        display: inline-block;
        transition: opacity 0.45s ease, transform 0.45s ease;
      }

      .v3-rotate.fading {
        opacity: 0;
        transform: translateY(6px);
      }

      .v3-hero-desc {
        font-size: 15px;
        font-weight: 400;
        line-height: 1.75;
        color: var(--s-text-muted-inv);
        margin: 20px 0 0;
        max-width: 480px;
        letter-spacing: 0.005em;
      }

      .v3-hero-actions {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        margin-top: 24px;
      }

      .v3-hero-install {
        margin-top: 20px;
        display: inline-flex;
        flex-direction: column;
        background: var(--s-terminal-bg);
        border: 1px solid var(--s-terminal-border);
        border-radius: 8px;
        max-width: fit-content;
        overflow: hidden;
      }

      .v3-pkg-cmd {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 16px;
      }

      .v3-pkg-cmd code {
        font-family: 'Geist Mono', monospace;
        font-size: 13px;
        font-weight: 400;
        color: rgba(255,255,255,0.4);
      }

      .v3-pkg-cmd code strong {
        color: rgba(255,255,255,0.85);
        font-weight: 400;
      }

      .v3-hero-install-copy {
        background: rgba(255,255,255,0.08);
        border: none;
        border-radius: 4px;
        color: rgba(255,255,255,0.5);
        font-family: 'Geist Mono', monospace;
        font-size: 10px;
        font-weight: 400;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        padding: 4px 10px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .v3-hero-install-copy:hover {
        background: rgba(255,255,255,0.14);
        color: rgba(255,255,255,0.8);
      }

      .v3-btn-light {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 11px 24px;
        font-family: 'JetBrains Mono', monospace;
        font-size: 11px;
        font-weight: 400;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        color: var(--s-bg);
        background: var(--s-text);
        border: none;
        border-radius: 100px;
        text-decoration: none;
        cursor: pointer;
        transition: opacity 0.2s;
      }

      .v3-btn-light:hover { opacity: 0.85; }

      .v3-btn-ghost {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 11px 24px;
        font-family: 'JetBrains Mono', monospace;
        font-size: 11px;
        font-weight: 400;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        color: var(--s-text-muted);
        background: none;
        border: 1px solid var(--s-border);
        border-radius: 100px;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.2s;
      }

      .v3-btn-ghost:hover {
        color: var(--s-text);
        border-color: var(--s-text-muted);
      }

      .v3-install-terminal {
        background: var(--s-terminal-bg);
        border: 1px solid var(--s-terminal-border);
        border-radius: 10px;
        overflow: hidden;
      }

      .v3-terminal-bar {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 12px 16px;
        border-bottom: 1px solid rgba(255,255,255,0.06);
      }

      .v3-terminal-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: rgba(255,255,255,0.12);
      }

      .v3-terminal-title {
        font-family: 'Geist Mono', monospace;
        font-size: 11px;
        font-weight: 400;
        color: rgba(255,255,255,0.3);
        margin-left: auto;
      }

      .v3-terminal-lines {
        padding: 16px 20px;
        display: flex;
        flex-direction: column;
        gap: 3px;
      }

      .v3-terminal-line {
        font-family: 'Geist Mono', monospace;
        font-size: 13px;
        font-weight: 400;
        line-height: 1.6;
        color: rgba(255,255,255,0.85);
        display: flex;
        gap: 8px;
      }

      .v3-terminal-prompt {
        color: rgba(255,255,255,0.35);
        user-select: none;
      }

      .v3-terminal-output {
        color: rgba(255,255,255,0.4);
        padding-left: 16px;
      }

      /* ── Sections ── */
      .v3-section {
        padding: clamp(40px, 5vw, 64px) clamp(20px, 4vw, 48px);
        max-width: 1200px;
        margin: 0 auto;
      }

      .v3-section-header {
        margin-bottom: 48px;
      }

      .v3-section-label {
        font-family: 'JetBrains Mono', monospace;
        font-size: 10px;
        font-weight: 400;
        text-transform: uppercase;
        letter-spacing: 0.2em;
        color: var(--s-text-muted);
        margin: 0 0 12px;
      }

      .v3-section-title {
        font-family: 'Noto Serif Display', serif;
        font-size: clamp(34px, 4.5vw, 52px);
        font-weight: 300;
        letter-spacing: -0.03em;
        line-height: 1.05;
        margin: 0;
        color: var(--s-text);
      }

      /* ── Feature grid (full-bleed lines) ── */
      .v3-features-wrap {
        position: relative;
        overflow: hidden;
      }

      /* Horizontal dashed lines — full viewport width */
      .v3-features-lines {
        position: absolute;
        inset: 0;
        pointer-events: none;
      }

      .v3-hline {
        position: absolute;
        left: 0;
        width: 100%;
        height: 1px;
        background: repeating-linear-gradient(
          to right,
          var(--s-border) 0, var(--s-border) 6px,
          transparent 6px, transparent 12px
        );
      }

      .v3-hline-top { top: 0; }
      .v3-hline-mid { top: 50%; }
      .v3-hline-bot { bottom: 0; }

      /* Vertical dashed lines — aligned to content edges + center */
      .v3-vline {
        position: absolute;
        top: 0;
        height: 100%;
        width: 1px;
        background: repeating-linear-gradient(
          to bottom,
          var(--s-border) 0, var(--s-border) 6px,
          transparent 6px, transparent 12px
        );
      }

      .v3-vline-left { left: max(clamp(20px, 4vw, 48px), calc((100% - 1200px) / 2)); }
      .v3-vline-center { left: 50%; }
      .v3-vline-right { right: max(clamp(20px, 4vw, 48px), calc((100% - 1200px) / 2)); }

      /* The actual grid */
      .v3-features {
        display: grid;
        grid-template-columns: 1fr 1fr;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 clamp(20px, 4vw, 48px);
        position: relative;
        z-index: 1;
      }

      @media (max-width: 768px) {
        .v3-features { grid-template-columns: 1fr; }
        .v3-vline-center { display: none; }
        .v3-hline-mid { display: none; }
      }

      /* Intersection dots */
      .v3-features-dots {
        position: absolute;
        pointer-events: none;
        z-index: 3;
        max-width: 1200px;
        left: 50%;
        transform: translateX(-50%);
        top: 0;
        bottom: 0;
        right: 0;
        width: min(calc(100% - clamp(20px, 4vw, 48px) * 2), 1200px);
      }

      .v3-dot {
        position: absolute;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--s-bg);
        border: 1px solid var(--s-border);
      }

      /* Corner dots */
      .v3-dot-tl { top: -4px; left: -4px; }
      .v3-dot-tr { top: -4px; right: -4px; }
      .v3-dot-bl { bottom: -4px; left: -4px; }
      .v3-dot-br { bottom: -4px; right: -4px; }
      /* Cross endpoint + center dots */
      .v3-dot-tc { top: -4px; left: calc(50% - 4px); }
      .v3-dot-bc { bottom: -4px; left: calc(50% - 4px); }
      .v3-dot-cl { top: calc(50% - 4px); left: -4px; }
      .v3-dot-cr { top: calc(50% - 4px); right: -4px; }
      .v3-dot-cc { top: calc(50% - 4px); left: calc(50% - 4px); }

      @media (max-width: 768px) {
        .v3-dot-tl, .v3-dot-tr, .v3-dot-bl, .v3-dot-br,
        .v3-dot-tc, .v3-dot-bc, .v3-dot-cl, .v3-dot-cr,
        .v3-dot-cc { display: none; }
      }

      .v3-feature {
        padding: clamp(32px, 4vw, 48px) clamp(24px, 3vw, 40px);
        position: relative;
        z-index: 1;
        display: flex;
        flex-direction: column;
        min-height: 280px;
        transition: background 0.3s ease;
      }

      .v3-feature:hover {
        background: var(--s-surface);
      }

      .v3-feature:hover .v3-feature-icon {
        opacity: 0.7;
        transition: opacity 0.3s ease;
      }

      .v3-feature:hover .v3-feature-link {
        color: var(--s-highlight);
      }

      .v3-feature:nth-child(odd) { padding-left: 0; }
      .v3-feature:nth-child(even) { padding-right: 0; }

      @media (max-width: 768px) {
        .v3-feature {
          border-bottom: 1px dashed var(--s-border);
          min-height: 240px;
        }
        .v3-feature:last-child { border-bottom: none; }
      }

      .v3-feature-top {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
        margin-bottom: 16px;
      }

      .v3-feature-icon {
        width: 26px;
        height: 26px;
        color: var(--s-text);
        opacity: 0.45;
        flex-shrink: 0;
      }

      .v3-feature h3 {
        font-family: 'Noto Serif Display', serif;
        font-size: clamp(26px, 2.8vw, 36px);
        font-weight: 300;
        color: var(--s-text);
        margin: 0;
        letter-spacing: -0.02em;
        line-height: 1.1;
      }

      .v3-feature p {
        font-size: 14px;
        font-weight: 400;
        line-height: 1.6;
        color: var(--s-text-muted);
        margin: 0;
        letter-spacing: 0.005em;
      }

      .v3-feature-link {
        margin-top: auto;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        font-weight: 400;
        color: var(--s-text);
        text-decoration: none;
        transition: gap 0.2s;
      }

      .v3-feature-link:hover {
        gap: 12px;
      }

      /* ── Files grid (dashed periphery matching features) ── */
      .v3-files-wrap {
        position: relative;
        overflow: hidden;
      }

      .v3-files-lines {
        position: absolute;
        inset: 0;
        pointer-events: none;
      }

      .v3-files-hline {
        position: absolute;
        left: 0;
        width: 100%;
        height: 1px;
        background: repeating-linear-gradient(
          to right,
          var(--s-border) 0, var(--s-border) 6px,
          transparent 6px, transparent 12px
        );
      }

      .v3-files-hline-top { top: 0; }
      .v3-files-hline-bot { bottom: 0; }

      .v3-files-vline {
        position: absolute;
        top: 0;
        height: 100%;
        width: 1px;
        background: repeating-linear-gradient(
          to bottom,
          var(--s-border) 0, var(--s-border) 6px,
          transparent 6px, transparent 12px
        );
      }

      .v3-files-vline-left { left: max(clamp(20px, 4vw, 48px), calc((100% - 1200px) / 2)); }
      .v3-files-vline-r1 { left: calc(max(clamp(20px, 4vw, 48px), calc((100% - 1200px) / 2)) + min(calc(100% - clamp(20px, 4vw, 48px) * 2), 1200px) / 3); }
      .v3-files-vline-r2 { left: calc(max(clamp(20px, 4vw, 48px), calc((100% - 1200px) / 2)) + min(calc(100% - clamp(20px, 4vw, 48px) * 2), 1200px) * 2 / 3); }
      .v3-files-vline-right { right: max(clamp(20px, 4vw, 48px), calc((100% - 1200px) / 2)); }

      .v3-files-dots {
        position: absolute;
        pointer-events: none;
        z-index: 3;
        max-width: 1200px;
        left: 50%;
        transform: translateX(-50%);
        top: 0;
        bottom: 0;
        width: min(calc(100% - clamp(20px, 4vw, 48px) * 2), 1200px);
      }

      .v3-files {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 clamp(20px, 4vw, 48px);
        position: relative;
        z-index: 1;
      }

      @media (max-width: 768px) {
        .v3-files { grid-template-columns: 1fr; }
        .v3-files-vline-r1, .v3-files-vline-r2 { display: none; }
      }

      .v3-file {
        padding: clamp(28px, 3vw, 40px);
        transition: background 0.3s ease;
      }

      .v3-file:first-child { padding-left: 0; }
      .v3-file:last-child { padding-right: 0; }

      .v3-file:hover {
        background: var(--s-surface);
      }

      .v3-file-name {
        font-family: 'JetBrains Mono', monospace;
        font-size: 13px;
        font-weight: 400;
        color: var(--s-text);
        margin: 0 0 8px;
        letter-spacing: 0.01em;
      }

      .v3-file-desc {
        font-size: 13px;
        font-weight: 400;
        line-height: 1.55;
        color: var(--s-text-muted);
        margin: 0;
      }

      /* ── CTA ── */
      .v3-cta {
        background: var(--s-bg-inv);
        color: var(--s-text-inv);
        margin: 0 clamp(20px, 4vw, 48px);
        border-radius: 10px;
        padding: clamp(64px, 8vw, 100px) clamp(32px, 5vw, 80px);
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .v3-cta::before {
        content: '';
        position: absolute;
        inset: 0;
        background: radial-gradient(ellipse 60% 50% at 50% 100%, rgba(196, 101, 58, 0.05) 0%, transparent 50%);
        pointer-events: none;
      }

      .v3-cta h2 {
        font-family: 'Noto Serif Display', serif;
        font-size: clamp(38px, 5vw, 60px);
        font-weight: 200;
        letter-spacing: -0.03em;
        line-height: 1.05;
        margin: 0 0 16px;
        color: var(--s-text-inv);
        position: relative;
      }

      .v3-cta h2 em {
        font-weight: 200;
        color: var(--s-text-muted-inv);
      }

      .v3-cta p {
        font-size: 15px;
        font-weight: 400;
        color: var(--s-text-muted-inv);
        margin: 0 0 36px;
        position: relative;
      }

      /* ── Footer ── */
      .v3-footer {
        padding: 28px clamp(20px, 4vw, 48px);
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 16px;
      }

      .v3-footer-note {
        font-size: 12px;
        font-weight: 400;
        color: var(--s-text-muted);
      }

      .v3-footer-links {
        display: flex;
        gap: 20px;
      }

      .v3-footer-links a {
        font-size: 12px;
        font-weight: 400;
        color: var(--s-text-muted);
        text-decoration: none;
        transition: color 0.2s;
      }

      .v3-footer-links a:hover { color: var(--s-text); }

      .v3-divider {
        border: none;
        border-top: 1px solid var(--s-border);
        margin: 0;
      }

      /* ── Agent Mode Toggle ── */
      .v3-agent-toggle {
        position: fixed;
        bottom: 24px;
        right: 24px;
        z-index: 100;
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 18px;
        font-family: 'Geist Mono', monospace;
        font-size: 12px;
        font-weight: 400;
        letter-spacing: 0.04em;
        color: var(--s-bg);
        background: var(--s-text);
        border: none;
        border-radius: 100px;
        cursor: pointer;
        transition: opacity 0.2s;
        box-shadow: 0 2px 12px rgba(0,0,0,0.12);
      }

      .v3-agent-toggle:hover { opacity: 0.85; }

      .v3-agent-toggle svg { flex-shrink: 0; }

      .v3-agent-toggle-label {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .v3-agent-toggle-pip {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: currentColor;
        opacity: 0.4;
        transition: opacity 0.2s, background 0.2s;
      }

      .v3-agent-toggle-pip.active {
        opacity: 1;
        background: #6fcf7c;
      }

      /* ── Agent View Panel ── */
      .v3-agent-view {
        display: none;
        position: fixed;
        inset: 0;
        z-index: 90;
        background: var(--s-bg);
        overflow-y: auto;
      }

      .v3-agent-view.active { display: flex; }

      .v3-agent-sidebar {
        width: 280px;
        flex-shrink: 0;
        border-right: 1px solid var(--s-border);
        padding: 32px 28px;
        display: flex;
        flex-direction: column;
        gap: 32px;
        overflow-y: auto;
      }

      @media (max-width: 768px) {
        .v3-agent-view.active { flex-direction: column; }
        .v3-agent-sidebar {
          width: 100%;
          border-right: none;
          border-bottom: 1px solid var(--s-border);
          padding: 24px 20px;
        }
      }

      .v3-agent-logo {
        font-family: 'Geist Mono', monospace;
        font-size: 14px;
        font-weight: 500;
        color: var(--s-text);
        letter-spacing: 0.02em;
      }

      .v3-agent-logo span {
        color: var(--s-text-muted);
        font-weight: 400;
      }

      .v3-agent-nav-group {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .v3-agent-nav-label {
        font-family: 'Geist Mono', monospace;
        font-size: 10px;
        font-weight: 400;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        color: var(--s-text-muted);
        margin: 0 0 8px;
      }

      .v3-agent-nav-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 6px;
        font-family: 'Geist Mono', monospace;
        font-size: 13px;
        font-weight: 400;
        color: var(--s-text);
        text-decoration: none;
        transition: background 0.15s;
      }

      .v3-agent-nav-item:hover {
        background: var(--s-bg-alt);
      }

      .v3-agent-nav-item code {
        font-family: inherit;
        font-size: 12px;
        color: var(--s-text-muted);
      }

      .v3-agent-copy-btn {
        opacity: 0;
        background: none;
        border: 1px solid var(--s-border);
        border-radius: 4px;
        color: var(--s-text-muted);
        font-family: 'Geist Mono', monospace;
        font-size: 9px;
        font-weight: 400;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        padding: 3px 8px;
        cursor: pointer;
        transition: all 0.15s;
        flex-shrink: 0;
      }

      .v3-agent-nav-item:hover .v3-agent-copy-btn { opacity: 1; }

      .v3-agent-copy-btn:hover {
        color: var(--s-text);
        border-color: var(--s-text-muted);
      }

      /* Agent main content */
      .v3-agent-main {
        flex: 1;
        padding: 40px clamp(28px, 4vw, 56px);
        overflow-y: auto;
        max-width: 780px;
      }

      .v3-agent-main h1 {
        font-family: 'Geist Mono', monospace;
        font-size: 20px;
        font-weight: 500;
        color: var(--s-text);
        margin: 0 0 8px;
        letter-spacing: -0.01em;
      }

      .v3-agent-main .v3-agent-tagline {
        font-family: 'Geist Mono', monospace;
        font-size: 14px;
        font-weight: 400;
        color: var(--s-text-muted);
        margin: 0 0 36px;
        line-height: 1.6;
      }

      .v3-agent-section {
        margin-bottom: 36px;
      }

      .v3-agent-section h2 {
        font-family: 'Geist Mono', monospace;
        font-size: 11px;
        font-weight: 400;
        text-transform: uppercase;
        letter-spacing: 0.14em;
        color: var(--s-text-muted);
        margin: 0 0 16px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--s-border);
      }

      .v3-agent-card {
        padding: 16px 0;
        border-bottom: 1px solid var(--s-border);
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 12px;
      }

      .v3-agent-card:last-child { border-bottom: none; }

      .v3-agent-card-info {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .v3-agent-card h3 {
        font-family: 'Geist Mono', monospace;
        font-size: 14px;
        font-weight: 500;
        color: var(--s-text);
        margin: 0;
      }

      .v3-agent-card p {
        font-family: 'Geist Mono', monospace;
        font-size: 12px;
        font-weight: 400;
        color: var(--s-text-muted);
        margin: 0;
        line-height: 1.5;
      }

      .v3-agent-card-actions {
        display: flex;
        gap: 6px;
        flex-shrink: 0;
        align-items: center;
      }

      .v3-agent-card-btn {
        background: none;
        border: 1px solid var(--s-border);
        border-radius: 4px;
        color: var(--s-text-muted);
        font-family: 'Geist Mono', monospace;
        font-size: 10px;
        font-weight: 400;
        letter-spacing: 0.04em;
        text-transform: uppercase;
        padding: 5px 10px;
        cursor: pointer;
        transition: all 0.15s;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }

      .v3-agent-card-btn:hover {
        color: var(--s-text);
        border-color: var(--s-text-muted);
      }

      .v3-agent-install {
        margin-top: 36px;
        padding: 16px 20px;
        background: var(--s-terminal-bg);
        border: 1px solid var(--s-terminal-border);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .v3-agent-install code {
        font-family: 'Geist Mono', monospace;
        font-size: 13px;
        font-weight: 400;
        color: rgba(255,255,255,0.7);
      }

      .v3-agent-install code strong {
        color: rgba(255,255,255,0.95);
        font-weight: 400;
      }

      .v3-agent-install button {
        background: rgba(255,255,255,0.08);
        border: none;
        border-radius: 4px;
        color: rgba(255,255,255,0.5);
        font-family: 'Geist Mono', monospace;
        font-size: 10px;
        font-weight: 400;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        padding: 5px 12px;
        cursor: pointer;
        transition: all 0.15s;
      }

      .v3-agent-install button:hover {
        background: rgba(255,255,255,0.14);
        color: rgba(255,255,255,0.8);
      }
    </style>
  </Fragment>

  <div class="v3">
    <!-- Nav -->
    <nav class="v3-nav">
      <div class="v3-nav-inner">
        <div class="v3-nav-left">
          <a href="/" class="v3-logo">dewey</a>
          <div class="v3-nav-links">
            <a href="/docs" class="v3-nav-link">Docs</a>
            <a href="https://www.npmjs.com/package/@arach/dewey" class="v3-nav-link" target="_blank" rel="noopener noreferrer">npm</a>
          </div>
        </div>
        <div class="v3-nav-right">
          <a href="https://github.com/arach/dewey" class="v3-nav-gh" target="_blank" rel="noopener noreferrer" title="GitHub">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/></svg>
          </a>
          <button class="v3-theme-btn" id="v3-theme-toggle" title="Toggle theme">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
          </button>
          <a href="/docs/quickstart" class="v3-nav-btn">Get Started</a>
        </div>
      </div>
    </nav>

    <!-- Hero -->
    <section class="v3-hero">
      <div class="v3-hero-inner">
        <div class="v3-hero-grid">
          <div>
            <h1>Curated docs<br/>for <em class="v3-rotate" data-words="agents.,devs.">agents.</em></h1>
            <p class="v3-hero-desc">
              Audit, score, and generate agent-ready documentation.<br/>Scaffold complete static doc sites from your markdown.
            </p>
            <div class="v3-hero-install">
              <div class="v3-pkg-cmd">
                <code>$ <strong>curl -fsSL dewey.arach.dev/install.sh | sh</strong></code>
                <button class="v3-hero-install-copy" id="v3-copy-btn"><span id="v3-copy-text">Copy</span></button>
              </div>
            </div>
            <div class="v3-hero-actions">
              <a href="/docs" class="v3-btn-light">
                View Docs
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
              </a>
              <a href="https://github.com/arach/dewey" class="v3-btn-ghost" target="_blank" rel="noopener noreferrer">
                View Source
              </a>
            </div>
          </div>
          <div class="v3-hero-right">
            <div class="v3-install-terminal">
              <div class="v3-terminal-bar">
                <span class="v3-terminal-dot"></span>
                <span class="v3-terminal-dot"></span>
                <span class="v3-terminal-dot"></span>
                <span class="v3-terminal-title">~/my-project</span>
              </div>
              <div class="v3-terminal-lines">
                <div class="v3-terminal-line">
                  <span class="v3-terminal-prompt">$</span>
                  <span class="v3-terminal-text">bunx dewey init</span>
                </div>
                <div class="v3-terminal-line v3-terminal-output">→ Created docs/overview.md</div>
                <div class="v3-terminal-line v3-terminal-output">→ Created dewey.config.ts</div>
                <div class="v3-terminal-line" style="margin-top: 8px;">
                  <span class="v3-terminal-prompt">$</span>
                  <span class="v3-terminal-text">bunx dewey generate</span>
                </div>
                <div class="v3-terminal-line v3-terminal-output">→ AGENTS.md</div>
                <div class="v3-terminal-line v3-terminal-output">→ llms.txt</div>
                <div class="v3-terminal-line v3-terminal-output">→ install.md</div>
                <div class="v3-terminal-line" style="margin-top: 8px;">
                  <span class="v3-terminal-prompt">$</span>
                  <span class="v3-terminal-text">bunx dewey audit</span>
                </div>
                <div class="v3-terminal-line v3-terminal-output">Score: 92/100 — Grade: A</div>
                <div class="v3-terminal-line v3-terminal-output">✓ AGENTS.md present</div>
                <div class="v3-terminal-line v3-terminal-output">✓ llms.txt present</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Features -->
    <section class="v3-section" style="padding-bottom: 0;">
      <div class="v3-section-header">
        <div>
          <p class="v3-section-label">Capabilities</p>
          <h2 class="v3-section-title">One package,<br/>everything you need.</h2>
        </div>
      </div>
    </section>

    <div class="v3-features-wrap">
      <!-- Full-bleed dashed lines -->
      <div class="v3-features-lines">
        <div class="v3-hline v3-hline-top"></div>
        <div class="v3-hline v3-hline-mid"></div>
        <div class="v3-hline v3-hline-bot"></div>
        <div class="v3-vline v3-vline-left"></div>
        <div class="v3-vline v3-vline-center"></div>
        <div class="v3-vline v3-vline-right"></div>
      </div>

      <!-- Dots at content-grid intersections -->
      <div class="v3-features-dots">
        <span class="v3-dot v3-dot-tl"></span>
        <span class="v3-dot v3-dot-tr"></span>
        <span class="v3-dot v3-dot-bl"></span>
        <span class="v3-dot v3-dot-br"></span>
        <span class="v3-dot v3-dot-tc"></span>
        <span class="v3-dot v3-dot-bc"></span>
        <span class="v3-dot v3-dot-cl"></span>
        <span class="v3-dot v3-dot-cr"></span>
        <span class="v3-dot v3-dot-cc"></span>
      </div>

      <div class="v3-features">

        <div class="v3-feature">
          <div class="v3-feature-top">
            <svg class="v3-feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></svg>
            <h3>CLI Toolkit</h3>
          </div>
          <p>Scaffold, audit, and generate agent-ready files from the command line</p>
          <a href="/docs/quickstart" class="v3-feature-link">
            Learn more
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </a>
        </div>

        <div class="v3-feature">
          <div class="v3-feature-top">
            <svg class="v3-feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
            <h3>Doc Site Generator</h3>
          </div>
          <p>Turn markdown into a complete static site with search, themes, and dark mode</p>
          <a href="/docs/quickstart#create-a-doc-site" class="v3-feature-link">
            Learn more
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </a>
        </div>

        <div class="v3-feature">
          <div class="v3-feature-top">
            <svg class="v3-feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
            <h3>Agent-Ready Files</h3>
          </div>
          <p>Generate AGENTS.md, llms.txt, and install.md for AI coding assistants</p>
          <a href="/docs/overview" class="v3-feature-link">
            Learn more
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </a>
        </div>

        <div class="v3-feature">
          <div class="v3-feature-top">
            <svg class="v3-feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
            <h3>Readiness Scoring</h3>
          </div>
          <p>Audit docs against a 100-point rubric with grades and recommendations</p>
          <a href="/docs/skills" class="v3-feature-link">
            Learn more
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </a>
        </div>
      </div>
    </div>

    <!-- Generated files -->
    <section class="v3-section" style="padding-bottom: 0;">
      <div class="v3-section-header">
        <div>
          <p class="v3-section-label">Output</p>
          <h2 class="v3-section-title">Generated<br/>agent files.</h2>
        </div>
      </div>
    </section>

    <div class="v3-files-wrap">
      <div class="v3-files-lines">
        <div class="v3-files-hline v3-files-hline-top"></div>
        <div class="v3-files-hline v3-files-hline-bot"></div>
        <div class="v3-files-vline v3-files-vline-left"></div>
        <div class="v3-files-vline v3-files-vline-r1"></div>
        <div class="v3-files-vline v3-files-vline-r2"></div>
        <div class="v3-files-vline v3-files-vline-right"></div>
      </div>

      <div class="v3-files-dots">
        <span class="v3-dot" style="top: -4px; left: -4px;"></span>
        <span class="v3-dot" style="top: -4px; left: calc(100% / 3 - 4px);"></span>
        <span class="v3-dot" style="top: -4px; left: calc(200% / 3 - 4px);"></span>
        <span class="v3-dot" style="top: -4px; right: -4px;"></span>
        <span class="v3-dot" style="bottom: -4px; left: -4px;"></span>
        <span class="v3-dot" style="bottom: -4px; left: calc(100% / 3 - 4px);"></span>
        <span class="v3-dot" style="bottom: -4px; left: calc(200% / 3 - 4px);"></span>
        <span class="v3-dot" style="bottom: -4px; right: -4px;"></span>
      </div>

      <div class="v3-files">
        <div class="v3-file">
          <p class="v3-file-name">AGENTS.md</p>
          <p class="v3-file-desc">Combined docs with critical context, entry points, and navigation rules for AI coding assistants.</p>
        </div>
        <div class="v3-file">
          <p class="v3-file-name">llms.txt</p>
          <p class="v3-file-desc">Plain text format following the llms.txt convention for broad LLM compatibility.</p>
        </div>
        <div class="v3-file">
          <p class="v3-file-name">install.md</p>
          <p class="v3-file-desc">LLM-executable installation guide following the installmd.org specification.</p>
        </div>
      </div>
    </div>

    <!-- CTA -->
    <div style="padding-bottom: clamp(60px, 8vw, 100px);">
      <section class="v3-cta">
        <h2>Crafted docs<br/>for <em class="v3-rotate" data-words="devs.,agents." style="font-style: italic;">devs.</em></h2>
        <p>Agent-ready documentation in minutes.</p>
        <a href="/docs/quickstart" class="v3-btn-light" style="position: relative;">
          Read the Quickstart
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </a>
      </section>
    </div>

    <!-- Footer -->
    <hr class="v3-divider" />
    <footer class="v3-footer">
      <span class="v3-footer-note">Named after Melvil Dewey, creator of the Dewey Decimal System. Made with ❤️ by <a href="https://github.com/arach" target="_blank" rel="noopener noreferrer" style="color: var(--s-text-muted); text-decoration: underline; text-underline-offset: 2px;">arach</a></span>
      <div class="v3-footer-links">
        <a href="/docs">Docs</a>
        <a href="https://www.npmjs.com/package/@arach/dewey" target="_blank" rel="noopener noreferrer">npm</a>
        <a href="https://github.com/arach/dewey" target="_blank" rel="noopener noreferrer">GitHub</a>
      </div>
    </footer>

    <!-- Agent View Toggle -->
    <button class="v3-agent-toggle" id="v3-agent-toggle">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
      <span class="v3-agent-toggle-label">
        Agent view
        <span class="v3-agent-toggle-pip" id="v3-agent-pip"></span>
      </span>
    </button>

    <!-- Agent View Panel -->
    <div class="v3-agent-view" id="v3-agent-view">
      <aside class="v3-agent-sidebar">
        <div class="v3-agent-logo">dewey <span>/ agent</span></div>

        <nav class="v3-agent-nav-group">
          <p class="v3-agent-nav-label">Pages</p>
          <a href="/docs" class="v3-agent-nav-item">
            <span>/docs</span>
            <button class="v3-agent-copy-btn" data-copy="https://dewey.arach.dev/docs" onclick="event.preventDefault()">copy</button>
          </a>
          <a href="/docs/quickstart" class="v3-agent-nav-item">
            <span>/quickstart</span>
            <button class="v3-agent-copy-btn" data-copy="https://dewey.arach.dev/docs/quickstart" onclick="event.preventDefault()">copy</button>
          </a>
          <a href="/docs/overview" class="v3-agent-nav-item">
            <span>/overview</span>
            <button class="v3-agent-copy-btn" data-copy="https://dewey.arach.dev/docs/overview" onclick="event.preventDefault()">copy</button>
          </a>
          <a href="/docs/skills" class="v3-agent-nav-item">
            <span>/skills</span>
            <button class="v3-agent-copy-btn" data-copy="https://dewey.arach.dev/docs/skills" onclick="event.preventDefault()">copy</button>
          </a>
        </nav>

        <nav class="v3-agent-nav-group">
          <p class="v3-agent-nav-label">Agent files</p>
          <a href="/view/agents-md" class="v3-agent-nav-item">
            <span>AGENTS.md</span>
            <button class="v3-agent-copy-btn" data-copy="https://dewey.arach.dev/AGENTS.md" onclick="event.preventDefault()">copy</button>
          </a>
          <a href="/view/llms-txt" class="v3-agent-nav-item">
            <span>llms.txt</span>
            <button class="v3-agent-copy-btn" data-copy="https://dewey.arach.dev/llms.txt" onclick="event.preventDefault()">copy</button>
          </a>
          <a href="/view/install-md" class="v3-agent-nav-item">
            <span>install.md</span>
            <button class="v3-agent-copy-btn" data-copy="https://dewey.arach.dev/install.md" onclick="event.preventDefault()">copy</button>
          </a>
        </nav>

        <nav class="v3-agent-nav-group">
          <p class="v3-agent-nav-label">Links</p>
          <a href="https://github.com/arach/dewey" class="v3-agent-nav-item" target="_blank" rel="noopener noreferrer">
            <span>GitHub</span>
          </a>
          <a href="https://www.npmjs.com/package/@arach/dewey" class="v3-agent-nav-item" target="_blank" rel="noopener noreferrer">
            <span>npm</span>
          </a>
        </nav>
      </aside>

      <main class="v3-agent-main">
        <h1>dewey</h1>
        <p class="v3-agent-tagline">Documentation toolkit for AI-agent-ready docs. Audit, score, and generate optimized documentation.</p>

        <div class="v3-agent-section">
          <h2>Generated files</h2>
          <div class="v3-agent-card">
            <div class="v3-agent-card-info">
              <h3>AGENTS.md</h3>
              <p>Combined docs with critical context, entry points, and navigation rules for AI coding assistants.</p>
            </div>
            <div class="v3-agent-card-actions">
              <a href="/view/agents-md" class="v3-agent-card-btn">view</a>
              <button class="v3-agent-card-btn" data-copy="https://dewey.arach.dev/AGENTS.md">copy link</button>
            </div>
          </div>
          <div class="v3-agent-card">
            <div class="v3-agent-card-info">
              <h3>llms.txt</h3>
              <p>Plain text format following the llms.txt convention for broad LLM compatibility.</p>
            </div>
            <div class="v3-agent-card-actions">
              <a href="/view/llms-txt" class="v3-agent-card-btn">view</a>
              <button class="v3-agent-card-btn" data-copy="https://dewey.arach.dev/llms.txt">copy link</button>
            </div>
          </div>
          <div class="v3-agent-card">
            <div class="v3-agent-card-info">
              <h3>install.md</h3>
              <p>LLM-executable installation guide following the installmd.org specification.</p>
            </div>
            <div class="v3-agent-card-actions">
              <a href="/view/install-md" class="v3-agent-card-btn">view</a>
              <button class="v3-agent-card-btn" data-copy="https://dewey.arach.dev/install.md">copy link</button>
            </div>
          </div>
        </div>

        <div class="v3-agent-section">
          <h2>CLI commands</h2>
          <div class="v3-agent-card">
            <div class="v3-agent-card-info">
              <h3>dewey init</h3>
              <p>Scaffold a docs/ folder with starter templates and dewey.config.ts.</p>
            </div>
            <div class="v3-agent-card-actions">
              <button class="v3-agent-card-btn" data-copy="npx dewey init">copy</button>
            </div>
          </div>
          <div class="v3-agent-card">
            <div class="v3-agent-card-info">
              <h3>dewey generate</h3>
              <p>Generate AGENTS.md, llms.txt, docs.json, and install.md from your docs.</p>
            </div>
            <div class="v3-agent-card-actions">
              <button class="v3-agent-card-btn" data-copy="npx dewey generate">copy</button>
            </div>
          </div>
          <div class="v3-agent-card">
            <div class="v3-agent-card-info">
              <h3>dewey create</h3>
              <p>Scaffold a complete Astro doc site from a markdown folder.</p>
            </div>
            <div class="v3-agent-card-actions">
              <button class="v3-agent-card-btn" data-copy="npx dewey create my-docs --source ./docs">copy</button>
            </div>
          </div>
          <div class="v3-agent-card">
            <div class="v3-agent-card-info">
              <h3>dewey audit</h3>
              <p>Score agent-readiness against a 100-point rubric with grades and recommendations.</p>
            </div>
            <div class="v3-agent-card-actions">
              <button class="v3-agent-card-btn" data-copy="npx dewey audit">copy</button>
            </div>
          </div>
        </div>

        <div class="v3-agent-install">
          <code>$ <strong>bun add -D @arach/dewey</strong></code>
          <button id="v3-agent-copy-install">copy</button>
        </div>
      </main>
    </div>
  </div>

  <script is:inline>
    // Copy install command
    document.getElementById('v3-copy-btn')?.addEventListener('click', async () => {
      await navigator.clipboard.writeText('curl -fsSL dewey.arach.dev/install.sh | sh')
      const textEl = document.getElementById('v3-copy-text')
      if (textEl) {
        textEl.textContent = 'Copied!'
        setTimeout(() => { textEl.textContent = 'Copy' }, 2000)
      }
    })

    // Theme toggle
    document.getElementById('v3-theme-toggle')?.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme') || 'light'
      const next = current === 'dark' ? 'light' : 'dark'
      document.documentElement.setAttribute('data-theme', next)
      try { localStorage.setItem('theme', next) } catch {}
    })

    // Agent view toggle
    const agentToggle = document.getElementById('v3-agent-toggle')
    const agentView = document.getElementById('v3-agent-view')
    const agentPip = document.getElementById('v3-agent-pip')
    let agentActive = false

    agentToggle?.addEventListener('click', () => {
      agentActive = !agentActive
      agentView?.classList.toggle('active', agentActive)
      agentPip?.classList.toggle('active', agentActive)
      document.body.style.overflow = agentActive ? 'hidden' : ''
    })

    // Copy install command (agent view)
    document.getElementById('v3-agent-copy-install')?.addEventListener('click', async () => {
      await navigator.clipboard.writeText('bun add -D @arach/dewey')
      const btn = document.getElementById('v3-agent-copy-install')
      if (btn) {
        btn.textContent = 'copied!'
        setTimeout(() => { btn.textContent = 'copy' }, 2000)
      }
    })

    // Rotating words
    document.querySelectorAll('.v3-rotate').forEach(el => {
      const words = el.getAttribute('data-words')?.split(',') || []
      if (words.length < 2) return
      let i = 0
      setInterval(() => {
        el.classList.add('fading')
        setTimeout(() => {
          i = (i + 1) % words.length
          el.textContent = words[i]
          el.classList.remove('fading')
        }, 450)
      }, 3500)
    })

    // Generic copy buttons (sidebar + cards)
    document.querySelectorAll('[data-copy]').forEach(btn => {
      btn.addEventListener('click', async (e) => {
        e.stopPropagation()
        const text = btn.getAttribute('data-copy')
        if (text) {
          await navigator.clipboard.writeText(text)
          const orig = btn.textContent
          btn.textContent = 'copied!'
          setTimeout(() => { btn.textContent = orig }, 2000)
        }
      })
    })
  </script>
</LandingLayout>
