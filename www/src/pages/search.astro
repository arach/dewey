---
import BaseLayout from '../layouts/BaseLayout.astro'
---

<BaseLayout title="Search">
  <Fragment slot="head">
    <link rel="stylesheet" href="/pagefind/pagefind-ui.css" />
  </Fragment>

  <section class="space-y-6">
    <div>
      <p class="text-xs uppercase tracking-widest text-[var(--color-text-muted)]">Search</p>
      <h1 class="text-3xl font-semibold">Find docs fast</h1>
    </div>

    <div id="search" class="rounded-[var(--radius-md)] border border-[var(--color-border)] bg-[var(--color-surface)] p-4"></div>
    <p id="search-fallback" class="text-sm text-[var(--color-text-muted)] hidden">
      Search index is generated on build. Run <code>bun run build</code> to enable Pagefind locally.
    </p>
  </section>

  <script is:inline>
    window.addEventListener('DOMContentLoaded', () => {
      if (window.PagefindUI) {
        new window.PagefindUI({
          element: '#search',
          showSubResults: true,
        })
      } else {
        document.getElementById('search-fallback')?.classList.remove('hidden')
      }
    })
  </script>
</BaseLayout>
